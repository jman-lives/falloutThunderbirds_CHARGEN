<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Character Generator - Debug</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    #debug-console {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: #111;
      color: #0f0;
      padding: 10px;
      height: 200px;
      overflow-y: auto;
      border-top: 2px solid #FF9800;
      font-family: monospace;
      font-size: 0.8rem;
      z-index: 10000;
    }
    main.container {
      margin-bottom: 220px;
    }
  </style>
</head>
<body>
  <main class="container">
    <h1>Character Generator (Debug Mode)</h1>

    <div class="controls" style="margin-bottom: 16px;">
      <button type="button" id="randomize">Generate Random</button>
      <button type="button" id="download">Download JSON</button>
      <input type="file" id="load-file" accept="application/json" />
      <button type="button" id="fill-sample">Fill Sample</button>
      <button type="button" id="go-advancement" style="display: inline-block; padding: 6px 12px; background-color: #FF9800; color: white; border: none; border-radius: 4px; text-decoration: none; cursor: pointer; font-weight: bold; margin-left: 8px;">Advancement & Perks â†’</button>
    </div>

    <form id="char-form">
      <section class="row">
        <label>Player
          <input type="text" id="player" name="player" />
        </label>
      </section>
      <section class="row">
        <label>Character Name
          <input type="text" id="name" name="name" />
        </label>
        <label>Race
          <select id="race" name="race">
            <option selected>Human</option>
            <option>Ghoul</option>
          </select>
        </label>
        <label>Age
          <input type="number" id="age" name="age" min="16" max="80" value="25">
        </label>
        <label>Gender
          <select id="gender" name="gender">
            <option selected>Male</option>
            <option>Female</option>
          </select>
        </label>
      </section>

      <section>
        <h2>Attributes</h2>
        <div style="margin-bottom: 12px; padding: 8px; background-color: #667; border-radius: 4px;">
          <p style="margin: 0; font-weight: bold;">Character Points Pool: <span id="points-pool">5</span> / 5</p>
          <p style="margin: 4px 0 0 0; font-size: 0.9rem; color: #ffe646;">Allocated: <span id="points-allocated">0</span> | Remaining: <span id="points-remaining">5</span></p>
          <p id="points-warning" style="margin: 4px 0 0 0; font-size: 0.85rem; color: #d32f2f; display: none;"></p>
        </div>
        <div class="attrs">
          <label>Strength (STR) <input type="number" id="strength" min="1" max="10" value="5"></label>
          <label>Perception (PE) <input type="number" id="perception" min="1" max="10" value="5"></label>
          <label>Endurance (EN) <input type="number" id="endurance" min="1" max="10" value="5"></label>
          <label>Charisma (CH) <input type="number" id="charisma" min="1" max="10" value="5"></label>
          <label>Intelligence (IN) <input type="number" id="intelligence" min="1" max="10" value="5"></label>
          <label>Agility (AG) <input type="number" id="agility" min="1" max="10" value="5"></label>
          <label>Luck (LK) <input type="number" id="luck" min="1" max="10" value="5"></label>
        </div>
      </section>

      <section>
        <h2>Tags</h2>
        <div class="attrs" id="skills-container">
          <div class="skill-row">
            <label class="skill-label">
              <input type="checkbox" class="tag-checkbox" data-skill="guns">
              Guns <span class="skill-base" id="base_guns">0%</span>
            </label>
          </div>
          <div class="skill-row">
            <label class="skill-label">
              <input type="checkbox" class="tag-checkbox" data-skill="energy_weapons">
              Energy Weapons <span class="skill-base" id="base_energy_weapons">0%</span>
            </label>
          </div>
          <div class="skill-row">
            <label class="skill-label">
              <input type="checkbox" class="tag-checkbox" data-skill="unarmed">
              Unarmed <span class="skill-base" id="base_unarmed">50%</span>
            </label>
          </div>
          <div class="skill-row">
            <label class="skill-label">
              <input type="checkbox" class="tag-checkbox" data-skill="melee_weapons">
              Melee Weapons <span class="skill-base" id="base_melee_weapons">40%</span>
            </label>
          </div>
          <div class="skill-row">
            <label class="skill-label">
              <input type="checkbox" class="tag-checkbox" data-skill="throwing">
              Throwing <span class="skill-base" id="base_throwing">20%</span>
            </label>
          </div>
          <div class="skill-row">
            <label class="skill-label">
              <input type="checkbox" class="tag-checkbox" data-skill="first_aid">
              First Aid <span class="skill-base" id="base_first_aid">20%</span>
            </label>
          </div>
          <div class="skill-row">
            <label class="skill-label">
              <input type="checkbox" class="tag-checkbox" data-skill="doctor">
              Doctor <span class="skill-base" id="base_doctor">15%</span>
            </label>
          </div>
          <div class="skill-row">
            <label class="skill-label">
              <input type="checkbox" class="tag-checkbox" data-skill="sneak">
              Sneak <span class="skill-base" id="base_sneak">20%</span>
            </label>
          </div>
          <div class="skill-row">
            <label class="skill-label">
              <input type="checkbox" class="tag-checkbox" data-skill="lockpick">
              Lockpick <span class="skill-base" id="base_lockpick">20%</span>
            </label>
          </div>
          <div class="skill-row">
            <label class="skill-label">
              <input type="checkbox" class="tag-checkbox" data-skill="steal">
              Steal <span class="skill-base" id="base_steal">15%</span>
            </label>
          </div>
          <div class="skill-row">
            <label class="skill-label">
              <input type="checkbox" class="tag-checkbox" data-skill="traps">
              Traps <span class="skill-base" id="base_traps">20%</span>
            </label>
          </div>
          <div class="skill-row">
            <label class="skill-label">
              <input type="checkbox" class="tag-checkbox" data-skill="science">
              Science <span class="skill-base" id="base_science">20%</span>
            </label>
          </div>
          <div class="skill-row">
            <label class="skill-label">
              <input type="checkbox" class="tag-checkbox" data-skill="repair">
              Repair <span class="skill-base" id="base_repair">15%</span>
            </label>
          </div>
          <div class="skill-row">
            <label class="skill-label">
              <input type="checkbox" class="tag-checkbox" data-skill="pilot">
              Pilot <span class="skill-base" id="base_pilot">10%</span>
            </label>
          </div>
          <div class="skill-row">
            <label class="skill-label">
              <input type="checkbox" class="tag-checkbox" data-skill="speech">
              Speech <span class="skill-base" id="base_speech">25%</span>
            </label>
          </div>
          <div class="skill-row">
            <label class="skill-label">
              <input type="checkbox" class="tag-checkbox" data-skill="barter">
              Barter <span class="skill-base" id="base_barter">20%</span>
            </label>
          </div>
          <div class="skill-row">
            <label class="skill-label">
              <input type="checkbox" class="tag-checkbox" data-skill="gambling">
              Gambling <span class="skill-base" id="base_gambling">25%</span>
            </label>
          </div>
          <div class="skill-row">
            <label class="skill-label">
              <input type="checkbox" class="tag-checkbox" data-skill="outdoorsman">
              Outdoorsman <span class="skill-base" id="base_outdoorsman">20%</span>
            </label>
          </div>
        </div>
      </section>
    </form>

    <pre id="output" aria-live="polite"></pre>
  </main>

  <div id="debug-console">
    <strong style="color: #FF9800;">Debug Console:</strong>
    <div id="console-output"></div>
  </div>

  <script>
    // Capture all console logs
    const consoleOutput = document.getElementById('console-output');
    const originalLog = console.log;
    const originalError = console.error;

    console.log = function(...args) {
      const msg = args.map(a => typeof a === 'object' ? JSON.stringify(a, null, 2) : String(a)).join(' ');
      const div = document.createElement('div');
      div.style.color = '#4CAF50';
      div.textContent = '[LOG] ' + msg;
      consoleOutput.appendChild(div);
      consoleOutput.scrollTop = consoleOutput.scrollHeight;
      originalLog.apply(console, args);
    };

    console.error = function(...args) {
      const msg = args.map(a => typeof a === 'object' ? JSON.stringify(a, null, 2) : String(a)).join(' ');
      const div = document.createElement('div');
      div.style.color = '#f44336';
      div.textContent = '[ERROR] ' + msg;
      consoleOutput.appendChild(div);
      consoleOutput.scrollTop = consoleOutput.scrollHeight;
      originalError.apply(console, args);
    };

    window.addEventListener('error', (e) => {
      const div = document.createElement('div');
      div.style.color = '#f44336';
      div.textContent = '[GLOBAL ERROR] ' + e.message;
      consoleOutput.appendChild(div);
      consoleOutput.scrollTop = consoleOutput.scrollHeight;
    });

    console.log('Debug console initialized');
  </script>

  <script src="advancement.js"></script>
  <script src="script.js"></script>
</body>
</html>
